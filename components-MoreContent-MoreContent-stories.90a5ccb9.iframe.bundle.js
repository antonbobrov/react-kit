"use strict";(self.webpackChunk_anton_bobrov_react_components=self.webpackChunk_anton_bobrov_react_components||[]).push([[318],{"./src/utils/prefixedClassName.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function prefixedClassName(className){return`rkc-${className}`}__webpack_require__.d(__webpack_exports__,{e:()=>prefixedClassName})},"./src/utils/prefixedClassNames.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>prefixedClasNames});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../common/temp/node_modules/.pnpm/classnames@2.3.2/node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_anton_bobrov_react_hooks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../react-hooks/lib/esm/utils/types/isString.js"),_prefixedClassName__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/prefixedClassName.ts");function prefixedClasNames(...classNames){return classnames__WEBPACK_IMPORTED_MODULE_0___default()(classNames.map((value=>(0,_anton_bobrov_react_hooks__WEBPACK_IMPORTED_MODULE_1__.H)(value)?(0,_prefixedClassName__WEBPACK_IMPORTED_MODULE_2__.e)(value):"")))}},"../react-hooks/lib/esm/hooks/useEvent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>useEvent});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),__spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},useEvent=function(callback){var callbackRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(callback);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){callbackRef.current=callback}),[callback]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return null===(_a=callbackRef.current)||void 0===_a?void 0:_a.call.apply(_a,__spreadArray([callbackRef],args,!1))}),[])}},"../react-hooks/lib/esm/utils/array/times.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function times(callback,count){for(var index=0,list=[];index<count;)list.push(callback(index)),index+=1;return list}__webpack_require__.d(__webpack_exports__,{D:()=>times})},"../react-hooks/lib/esm/utils/internal/getHookEventElement.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function getHookEventElement(ref){return ref&&"current"in ref?ref.current:ref}__webpack_require__.d(__webpack_exports__,{I:()=>getHookEventElement})},"../react-hooks/lib/esm/utils/types/isString.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function isString(value){return"string"==typeof value}__webpack_require__.d(__webpack_exports__,{H:()=>isString})},"../react-vevet-hooks/lib/esm/hooks/useTimeline.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>useTimeline});var _anton_bobrov_react_hooks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../react-hooks/lib/esm/hooks/useEvent.js"),_anton_bobrov_vevet_init__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../vevet-init/lib/esm/index.js"),_anton_bobrov_vevet_init__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../common/temp/node_modules/.pnpm/vevet@2.17.0/node_modules/vevet/build/es/components/timeline/Timeline.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");function useTimeline(_a){var duration=_a.duration,onStartProp=_a.onStart,onProgressProp=_a.onProgress,onEndProp=_a.onEnd,startDuration=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(duration)[0],_b=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),timeline=_b[0],setTimeline=_b[1],onStart=(0,_anton_bobrov_react_hooks__WEBPACK_IMPORTED_MODULE_1__.z)(onStartProp),onProgress=(0,_anton_bobrov_react_hooks__WEBPACK_IMPORTED_MODULE_1__.z)(onProgressProp),onEnd=(0,_anton_bobrov_react_hooks__WEBPACK_IMPORTED_MODULE_1__.z)(onEndProp);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(_anton_bobrov_vevet_init__WEBPACK_IMPORTED_MODULE_2__.vevet){var tm=new _anton_bobrov_vevet_init__WEBPACK_IMPORTED_MODULE_3__.T({duration:startDuration});return setTimeline(tm),onStart&&tm.addCallback("start",onStart),onProgress&&tm.addCallback("progress",onProgress),onEnd&&tm.addCallback("end",onEnd),function(){return tm.destroy()}}}),[startDuration,onEnd,onProgress,onStart]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){(null==timeline?void 0:timeline.prop.duration)!==duration&&(null==timeline||timeline.changeProp({duration}))}),[duration,timeline]);var play=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){null==timeline||timeline.play()}),[timeline]),reverse=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){!timeline||timeline.progress<=0||timeline.reverse()}),[timeline]),pause=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){null==timeline||timeline.pause()}),[timeline]),reset=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){timeline&&(pause(),timeline.progress=0)}),[pause,timeline]);return{timeline,play,reverse,pause,reset}}},"../vevet-init/lib/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{vevet:()=>vevet});var vevet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../common/temp/node_modules/.pnpm/vevet@2.17.0/node_modules/vevet/build/es/app/Application.js"),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},overrideProps="undefined"!=typeof window&&"vevetProps"in window?window.vevetProps:{},props=__assign(__assign({},{sayHi:!0,tablet:1199,phone:899,viewportResizeTimeout:30,easing:[.25,.1,.25,1],webpSupport:!0}),overrideProps),vevet="undefined"!=typeof window?new vevet__WEBPACK_IMPORTED_MODULE_0__.M(__assign(__assign({},props),{prefix:"v-"})):void 0},"./src/components/MoreContent/MoreContent.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>MoreContent_stories});var react=__webpack_require__("../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),times=__webpack_require__("../react-hooks/lib/esm/utils/array/times.js"),classnames=__webpack_require__("../../common/temp/node_modules/.pnpm/classnames@2.3.2/node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),prefixedClassNames=__webpack_require__("./src/utils/prefixedClassNames.ts"),getHookEventElement=__webpack_require__("../react-hooks/lib/esm/utils/internal/getHookEventElement.js"),ResizeObserver_es=__webpack_require__("../../common/temp/node_modules/.pnpm/resize-observer-polyfill@1.5.1/node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js"),useEvent=__webpack_require__("../react-hooks/lib/esm/hooks/useEvent.js");function useClientSize(ref){var _a=(0,react.useState)(0),clientWidth=_a[0],setClientWidth=_a[1],_b=(0,react.useState)(0),clientHeight=_b[0],setClientHeight=_b[1];return function useOnElementResize(ref,effectProp,settings){var _a,isDisabled=null==settings?void 0:settings.isDisabled,delay=null!==(_a=null==settings?void 0:settings.delay)&&void 0!==_a?_a:10,effect=(0,useEvent.z)(effectProp),timeoutRef=(0,react.useRef)(null);(0,react.useEffect)((function(){var element=(0,getHookEventElement.I)(ref);if(element&&!isDisabled){var destructor,resizeObserver=new ResizeObserver_es.Z((function(){null==destructor||destructor(),timeoutRef.current&&clearTimeout(timeoutRef.current),timeoutRef.current=setTimeout((function(){destructor=effect()}),delay)}));return resizeObserver.observe(element),function(){resizeObserver.disconnect(),timeoutRef.current&&clearTimeout(timeoutRef.current),null==destructor||destructor()}}}),[delay,effect,isDisabled,ref])}(ref,(function(){var element=(0,getHookEventElement.I)(ref);element&&(setClientWidth(element.clientWidth),setClientHeight(element.clientHeight))})),{clientWidth,clientHeight}}var useTimeline=__webpack_require__("../react-vevet-hooks/lib/esm/hooks/useTimeline.js");var jsx_runtime=__webpack_require__("../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const Component=({isActive,toggle})=>(0,jsx_runtime.jsx)("button",{type:"button",onClick:toggle,"aria-hidden":!0,children:isActive?"Show less":"Show More"});Component.displayName="Component";const Button_Button=(0,react.memo)(Component);try{Component.displayName="Component",Component.__docgenInfo={description:"",displayName:"Component",props:{isActive:{defaultValue:null,description:"The content is fully shown",name:"isActive",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Show/hide content",name:"toggle",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MoreContent/Button.tsx#Component"]={docgenInfo:Component.__docgenInfo,name:"Component",path:"src/components/MoreContent/Button.tsx#Component"})}catch(__react_docgen_typescript_loader_error){}try{Button_Button.displayName="Button",Button_Button.__docgenInfo={description:"",displayName:"Button",props:{isActive:{defaultValue:null,description:"The content is fully shown",name:"isActive",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Show/hide content",name:"toggle",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MoreContent/Button.tsx#Button"]={docgenInfo:Button_Button.__docgenInfo,name:"Button",path:"src/components/MoreContent/Button.tsx#Button"})}catch(__react_docgen_typescript_loader_error){}const MoreContent=(0,react.forwardRef)((({className,style,children,renderButton:Button=Button_Button,duration=500,minHeight=120},forwardedRef)=>{const clipperRef=(0,react.useRef)(null),contentRef=(0,react.useRef)(null),{isActive,isEnabled,toggle}=function useWrapperMoreContent({clipperRef,contentRef,minHeight,duration}){const{clientHeight:contentHeight}=useClientSize(contentRef),[isActive,setIsActive]=(0,react.useState)(!1),[isEnabled,setIsEnabled]=(0,react.useState)(!1);(0,react.useEffect)((()=>{setIsEnabled(contentHeight>=minHeight)}),[contentHeight,minHeight]);const timeline=(0,useTimeline.m)({duration,onProgress:({easing,progress})=>{const clipper=clipperRef.current;if(!clipper)return;const difference=Math.max(contentHeight-minHeight,0),height=minHeight+difference*easing;clipper.style.height=progress<1?`${height}px`:"",clipper.style.maxHeight="initial"}});return(0,react.useEffect)((()=>{timeline&&(isActive?timeline.play():timeline.reverse())}),[isActive,timeline]),{toggle:(0,useEvent.z)((()=>setIsActive((val=>!val)))),isActive,isEnabled}}({clipperRef,contentRef,minHeight,duration});return(0,jsx_runtime.jsxs)("div",{ref:forwardedRef,className:classnames_default()((0,prefixedClassNames.I)("more-content"),className),style,children:[(0,jsx_runtime.jsx)("div",{ref:clipperRef,className:(0,prefixedClassNames.I)("more-content__clipper",isEnabled&&"more-content__clipper_enabled",isActive&&"more-content__clipper_active"),style:{maxHeight:`${minHeight}px`},children:(0,jsx_runtime.jsx)("div",{ref:contentRef,className:(0,prefixedClassNames.I)("more-content__content"),children})}),isEnabled&&(0,jsx_runtime.jsx)(Button,{isActive,toggle})]})}));MoreContent.displayName="MoreContent";try{MoreContent.displayName="MoreContent",MoreContent.__docgenInfo={description:"",displayName:"MoreContent",props:{renderButton:{defaultValue:null,description:"Custom button renderer",name:"renderButton",required:!1,type:{name:"TMoreContentButtonRenderer"}},duration:{defaultValue:{value:"500"},description:"Animation duration",name:"duration",required:!1,type:{name:"number"}},minHeight:{defaultValue:{value:"120"},description:"Minimum height of the content",name:"minHeight",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MoreContent/index.tsx#MoreContent"]={docgenInfo:MoreContent.__docgenInfo,name:"MoreContent",path:"src/components/MoreContent/index.tsx#MoreContent"})}catch(__react_docgen_typescript_loader_error){}const MoreContent_stories={title:"Wrappers/MoreContent",component:MoreContent,tags:["autodocs"],args:{style:{maxWidth:300},children:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,times.D)((index=>(0,jsx_runtime.jsx)("div",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorum fugiat numquam quia corporis sed, nesciunt aut at expedita sunt. Voluptates quos est adipisci exercitationem nihil nisi impedit labore itaque. Ex!"},index)),10)})}},Default={};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);