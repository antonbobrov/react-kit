"use strict";(self.webpackChunk_anton_bobrov_react_components=self.webpackChunk_anton_bobrov_react_components||[]).push([[559],{"./src/components/BaseVideo/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>BaseVideo});var useForwardedRef=__webpack_require__("../react-hooks/lib/esm/hooks/useForwardedRef.js"),react=__webpack_require__("../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),es=__webpack_require__("../../common/temp/node_modules/.pnpm/vevet@2.17.0/node_modules/vevet/build/es/index.js"),p_cancelable=__webpack_require__("../../common/temp/node_modules/.pnpm/p-cancelable@3.0.0/node_modules/p-cancelable/index.js");var jsx_runtime=__webpack_require__("../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const BaseVideo=(0,react.forwardRef)((({src,children,autoPlay,onLoadedMetadata,...videoProps},forwardedRef)=>{const ref=(0,useForwardedRef.t)(forwardedRef),[isLoaded,setIsLoaded]=(0,react.useState)(!1),isAutoPlay=isLoaded&&autoPlay;return(0,react.useEffect)((()=>{if(!isAutoPlay||!ref.current)return;const promise=(video=>{let timeout;const play=()=>new p_cancelable.Z((resolve=>{video.play().then(resolve).catch((()=>playWithTimeout(resolve)))})),playWithTimeout=callback=>{timeout?.clear(),timeout=es.P6.common.timeoutCallback((()=>{play()?.then(callback).catch((()=>{}))}),30)};return play()})(ref.current);return promise?.then((()=>{})).catch((()=>{})),()=>promise?.cancel()}),[isAutoPlay,ref]),(0,jsx_runtime.jsx)("video",{ref,disablePictureInPicture:!0,playsInline:!0,preload:"auto",...videoProps,src:void 0,onLoadedMetadata:evt=>{onLoadedMetadata?.(evt),setTimeout((()=>setIsLoaded(!0)),0)},children:children||(0,jsx_runtime.jsx)("source",{src,type:"video/mp4"})})}));BaseVideo.displayName="BaseVideo";try{BaseVideo.displayName="BaseVideo",BaseVideo.__docgenInfo={description:"Base Video component",displayName:"BaseVideo",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BaseVideo/index.tsx#BaseVideo"]={docgenInfo:BaseVideo.__docgenInfo,name:"BaseVideo",path:"src/components/BaseVideo/index.tsx#BaseVideo"})}catch(__react_docgen_typescript_loader_error){}},"../react-hooks/lib/esm/hooks/useForwardedRef.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>useForwardedRef});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");function useForwardedRef(forwardedRef){var ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(forwardedRef,(function(){return ref.current})),ref}},"./src/components/BaseVideo/BaseVideo.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"Video/BaseVideo",component:__webpack_require__("./src/components/BaseVideo/index.tsx").H,tags:["autodocs"],args:{width:300,autoPlay:!0,controls:!0,muted:!0}},Default={args:{src:"./video/video.mp4"}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    src: './video/video.mp4'\n  }\n}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);